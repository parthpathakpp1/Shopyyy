{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/PARTH/Desktop/Ecommerce-App-2023/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/PARTH/Desktop/Ecommerce-App-2023/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/PARTH/Desktop/Ecommerce-App-2023/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from\"react\";import Layout from\"./../components/Layout/Layout\";import axios from\"axios\";import{useParams,useNavigate}from\"react-router-dom\";import\"../styles/ProductDetailsStyles.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ProductDetails=function ProductDetails(){var _product$price,_product$category;var params=useParams();var navigate=useNavigate();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),product=_useState2[0],setProduct=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),relatedProducts=_useState4[0],setRelatedProducts=_useState4[1];//initalp details\nuseEffect(function(){if(params!==null&&params!==void 0&&params.slug)getProduct();},[params===null||params===void 0?void 0:params.slug]);//getProduct\nvar getProduct=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"/api/v1/product/get-product/\".concat(params.slug));case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;setProduct(data===null||data===void 0?void 0:data.product);getSimilarProduct(data===null||data===void 0?void 0:data.product._id,data===null||data===void 0?void 0:data.product.category._id);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 12:case\"end\":return _context.stop();}},_callee,null,[[0,9]]);}));return function getProduct(){return _ref.apply(this,arguments);};}();//get similar product\nvar getSimilarProduct=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(pid,cid){var _yield$axios$get2,data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.get(\"/api/v1/product/related-product/\".concat(pid,\"/\").concat(cid));case 3:_yield$axios$get2=_context2.sent;data=_yield$axios$get2.data;setRelatedProducts(data===null||data===void 0?void 0:data.products);_context2.next=11;break;case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 11:case\"end\":return _context2.stop();}},_callee2,null,[[0,8]]);}));return function getSimilarProduct(_x,_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Layout,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row container product-details\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-md-6\",children:/*#__PURE__*/_jsx(\"img\",{src:\"/api/v1/product/product-photo/\".concat(product._id),className:\"card-img-top\",alt:product.name,height:\"300\",width:\"350px\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-6 product-details-info\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-center\",children:\"Product Details\"}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Name : \",product.name]}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Description : \",product.description]}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Price :\",product===null||product===void 0?void 0:(_product$price=product.price)===null||_product$price===void 0?void 0:_product$price.toLocaleString(\"en-US\",{style:\"currency\",currency:\"USD\"})]}),/*#__PURE__*/_jsxs(\"h6\",{children:[\"Category : \",product===null||product===void 0?void 0:(_product$category=product.category)===null||_product$category===void 0?void 0:_product$category.name]}),/*#__PURE__*/_jsx(\"button\",{class:\"btn btn-secondary ms-1\",children:\"ADD TO CART\"})]})]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"row container similar-products\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"Similar Products \\u27A1\\uFE0F\"}),relatedProducts.length<1&&/*#__PURE__*/_jsx(\"p\",{className:\"text-center\",children:\"No Similar Products found\"}),/*#__PURE__*/_jsx(\"div\",{className:\"d-flex flex-wrap\",children:relatedProducts===null||relatedProducts===void 0?void 0:relatedProducts.map(function(p){return/*#__PURE__*/_jsxs(\"div\",{className:\"card m-2\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"/api/v1/product/product-photo/\".concat(p._id),className:\"card-img-top\",alt:p.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-name-price\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:p.name}),/*#__PURE__*/_jsx(\"h5\",{className:\"card-title card-price\",children:p.price.toLocaleString(\"en-US\",{style:\"currency\",currency:\"USD\"})})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text \",children:[p.description.substring(0,60),\"...\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-name-price\",children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-info ms-1\",onClick:function onClick(){return navigate(\"/product/\".concat(p.slug));},children:\"More Details\"})})]})]},p._id);})})]})]});};export default ProductDetails;","map":{"version":3,"names":["React","useState","useEffect","Layout","axios","useParams","useNavigate","jsx","_jsx","jsxs","_jsxs","ProductDetails","_product$price","_product$category","params","navigate","_useState","_useState2","_slicedToArray","product","setProduct","_useState3","_useState4","relatedProducts","setRelatedProducts","slug","getProduct","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$axios$get","data","wrap","_callee$","_context","prev","next","get","concat","sent","getSimilarProduct","_id","category","t0","console","log","stop","apply","arguments","_ref2","_callee2","pid","cid","_yield$axios$get2","_callee2$","_context2","products","_x","_x2","children","className","src","alt","name","height","width","description","price","toLocaleString","style","currency","class","length","map","p","substring","onClick"],"sources":["C:/Users/PARTH/Desktop/Ecommerce-App-2023/client/src/pages/ProductDetails.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport Layout from \"./../components/Layout/Layout\";\r\nimport axios from \"axios\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport \"../styles/ProductDetailsStyles.css\";\r\n\r\nconst ProductDetails = () => {\r\n    const params = useParams();\r\n    const navigate = useNavigate();\r\n    const [product, setProduct] = useState({});\r\n    const [relatedProducts, setRelatedProducts] = useState([]);\r\n\r\n    //initalp details\r\n    useEffect(() => {\r\n        if (params?.slug) getProduct();\r\n    }, [params?.slug]);\r\n    //getProduct\r\n    const getProduct = async () => {\r\n        try {\r\n            const { data } = await axios.get(\r\n                `/api/v1/product/get-product/${params.slug}`\r\n            );\r\n            setProduct(data?.product);\r\n            getSimilarProduct(data?.product._id, data?.product.category._id);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    };\r\n    //get similar product\r\n    const getSimilarProduct = async (pid, cid) => {\r\n        try {\r\n            const { data } = await axios.get(\r\n                `/api/v1/product/related-product/${pid}/${cid}`\r\n            );\r\n            setRelatedProducts(data?.products);\r\n        } catch (error) {\r\n            console.log(error);\r\n        }\r\n    };\r\n    return (\r\n        <Layout>\r\n            <div className=\"row container product-details\">\r\n                <div className=\"col-md-6\">\r\n                    <img\r\n                        src={`/api/v1/product/product-photo/${product._id}`}\r\n                        className=\"card-img-top\"\r\n                        alt={product.name}\r\n                        height=\"300\"\r\n                        width={\"350px\"}\r\n                    />\r\n                </div>\r\n                <div className=\"col-md-6 product-details-info\">\r\n                    <h1 className=\"text-center\">Product Details</h1>\r\n                    <hr />\r\n                    <h6>Name : {product.name}</h6>\r\n                    <h6>Description : {product.description}</h6>\r\n                    <h6>\r\n                        Price :\r\n                        {product?.price?.toLocaleString(\"en-US\", {\r\n                            style: \"currency\",\r\n                            currency: \"USD\",\r\n                        })}\r\n                    </h6>\r\n                    <h6>Category : {product?.category?.name}</h6>\r\n                    <button class=\"btn btn-secondary ms-1\">ADD TO CART</button>\r\n                </div>\r\n            </div>\r\n            <hr />\r\n            <div className=\"row container similar-products\">\r\n                <h4>Similar Products ➡️</h4>\r\n                {relatedProducts.length < 1 && (\r\n                    <p className=\"text-center\">No Similar Products found</p>\r\n                )}\r\n                <div className=\"d-flex flex-wrap\">\r\n                    {relatedProducts?.map((p) => (\r\n                        <div className=\"card m-2\" key={p._id}>\r\n                            <img\r\n                                src={`/api/v1/product/product-photo/${p._id}`}\r\n                                className=\"card-img-top\"\r\n                                alt={p.name}\r\n                            />\r\n                            <div className=\"card-body\">\r\n                                <div className=\"card-name-price\">\r\n                                    <h5 className=\"card-title\">{p.name}</h5>\r\n                                    <h5 className=\"card-title card-price\">\r\n                                        {p.price.toLocaleString(\"en-US\", {\r\n                                            style: \"currency\",\r\n                                            currency: \"USD\",\r\n                                        })}\r\n                                    </h5>\r\n                                </div>\r\n                                <p className=\"card-text \">\r\n                                    {p.description.substring(0, 60)}...\r\n                                </p>\r\n                                <div className=\"card-name-price\">\r\n                                    <button\r\n                                        className=\"btn btn-info ms-1\"\r\n                                        onClick={() => navigate(`/product/${p.slug}`)}\r\n                                    >\r\n                                        More Details\r\n                                    </button>\r\n                                    {/* <button\r\n                  className=\"btn btn-dark ms-1\"\r\n                  onClick={() => {\r\n                    setCart([...cart, p]);\r\n                    localStorage.setItem(\r\n                      \"cart\",\r\n                      JSON.stringify([...cart, p])\r\n                    );\r\n                    toast.success(\"Item Added to cart\");\r\n                  }}\r\n                >\r\n                  ADD TO CART\r\n                </button> */}\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n        </Layout>\r\n    );\r\n};\r\n\r\nexport default ProductDetails;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}